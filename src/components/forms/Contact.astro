---
import Button from "@components/ui/Button.astro";
import Input from "@components/ui/form/Input.astro";
import Textarea from "@components/ui/form/Textarea.astro";
import Radio from "@components/ui/form/Radio.astro";
import Checkbox from "@components/ui/form/Checkbox.astro";
import Select from "@components/ui/form/Select.astro";

const personaOptions = [
  { label: "I'm a solo founder or technical lead", value: "cid" },
  { label: "I'm a vCISO or Consultant", value: "tifa" },
  { label: "I'm part of a growing team", value: "team" },
  { label: "Other", value: "other" }
];

const interestOptions = [
  { label: "Security Strategy / vCISO Guidance", value: "strategy" },
  { label: "Cloud Security Assessment", value: "cloud-security" },
  { label: "Compliance Readiness", value: "compliance" },
  { label: "Developer Security Coaching", value: "coaching" }
];


const formBackground = 'light';
---

<section class="site-container py-base" x-data="{ submitted: false, loading: false }" data-aos="fade-up">
  <form
    class="space-y-6 border border-[var(--color-border)] p-6 rounded-lg bg-surface shadow-sm"
    @submit.prevent="loading = true; setTimeout(() => { submitted = true; loading = false }, 1500)"
  >
    <!-- Hidden honeypot field -->
    <input
      type="text"
      name="website"
      tabindex="-1"
      autocomplete="off"
      class="hidden"
      aria-hidden="true"
    />

    <!-- Form feedback -->
    <template x-if="submitted">
      <p class="text-sm font-medium text-green-600">Thank you! We’ll be in touch shortly.</p>
    </template>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <Input label="Name" id="name" name="name" required background={formBackground} />
      <Input label="Email" type="email" id="email" name="email" required background={formBackground} />
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <Input label="Phone" type="tel" id="phone" name="phone" background={formBackground} />
      <Input label="Company" id="company" name="company" background={formBackground} />
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      <Radio
        label="Which best describes you?"
        id="persona"
        name="persona"
        options={personaOptions}
        required
        background={formBackground}
      />
      <Checkbox
        label="Areas of Interest"
        id="interests"
        name="interests"
        options={interestOptions}
        background={formBackground}
      />
    </div>

    <Textarea
      label="Message"
      id="message"
      name="message"
      required
      background={formBackground}
      aria-describedby="message-description"
    />
    <p id="message-description" class="text-xs text-[var(--color-body-light)] mt-1">
      Briefly describe your situation or what you'd like help with.
    </p>

    <Checkbox
      label="I agree to the terms and conditions"
      id="terms"
      name="terms"
      required
      background={formBackground}
    />

    <div class="mt-6">
      <Button type="submit" disabled x-bind:disabled="loading">
        <span x-show="!loading">Submit</span>
        <span x-show="loading">Sending…</span>
      </Button>
    </div>
  </form>
</section>
